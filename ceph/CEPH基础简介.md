# CEPHCEPH基础简介

## 一、概述

​	Ceph提供了对象存储、块设备、文件系统功能，它可靠性高、管理简单、并且是开源软件。Ceph的强大可以改变公司的IT基础架构和海量数据管理能力。

| CEPH对象存储                                                 | CEPH块设备                                                   | CEPH文件系统                                                 |
| ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| - REST 风格的接口 <br/>- 与S3和Swift兼容的API <br/>- S3风格的子域 <br/>- 统一的S3/Swift命名空间 <br/>- 用户管理 <br/>- 利用率跟踪 <br/>- 条带化对象 <br/>- 云解决方案集成 <br/>- 多站点部署 <br/>- 灾难恢复 | - 瘦接口支持 <br/>- 映像尺寸最大16EB <br/>- 条带化可定制 <br/>- 内存缓存 <br/>- 快照 <br/>- 写时复制克隆 <br/>- 支持内核级驱动 <br/>- 支持kvm和libvirt<br/>- 可作为云解决方案的后端 <br/>- 增量备份 | - 与POSIX兼容语义 <br/>- 元数据独立于数据<br/>- 动态重均衡 <br/>- 子目录快照 <br/>- 可配置的条带化 <br/>- 有内核驱动支持 <br/>- 可作为NFS/CIFS部署 <br/>- 可用于Hadoop（取代HDFS） |



## 二、简介

​	不管是想为云平台提供ceph对象存储、ceph块设备，还是想部署一个ceph文件系统，所有ceph存储集群的部署都始于部署一个个ceph节点、网络和ceph存储集群。Ceph存储集群至少需要一个Ceph Monitor和两个OSD守护进程。而运行Ceph文件系统客户端时，则必须要有元数据服务器（Metadata Server）。

![img](http://docs.ceph.org.cn/_images/ditaa-fbe8ee62a8a21a317df92d84a62447c4ecd11e34.png)

- Monitor：Monitor维护着展示集群状态的各种图表，包括监视器图、OSD图、归置组（PG）图和CRUSG图。Ceph保存着发生在Monitors、OSD和PG上的每一次状态变更的历史信息（称为epoch）。
- OSD：OSD守护进程的功能是存储数据，处理数据的复制、恢复、回填、再均衡，并通过检查其他osd守护进程的心跳来向Ceph Monitor提供一些监控信息。当Ceph存储集群设定为有2个副本时，至少需要2个osd守护进程，集群才能达到**active+clean**状态（Ceph默认有3副本，但你可以调整福本数）。
- MDS：元数据服务器（MDS）为**Ceph 文件系统**存储元数据（也就是说，Ceph块设置、Ceph对象存储不使用MDS）。元数据服务器使得POSIX文件系统的用户们，可以在不对Ceph存储集群造成负担的前提下，执行诸如ls、find等基本命令。

Ceph把客户端数据保存为存储池内的对象。通过使用CRUSH算法，Ceph可以计算出哪个归置组（PG）应该持有指定的对象（Object），然后进一步计算出哪个OSD守护进程持有该归置组。CRUSH算法使得Ceph存储集群能够动态的伸缩、再均衡和修复。